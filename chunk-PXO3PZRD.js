import{b as f}from"./chunk-NA6WQYLY.js";import{a as W,b as X}from"./chunk-M46KU7RK.js";import"./chunk-RL6XXP2Q.js";import{$ as y,Ca as R,Da as B,Ea as G,Fa as H,Ga as L,Ha as U,I as m,Ia as V,Ja as Z,Ka as K,La as d,Ma as S,Na as J,P as v,T as o,U as P,W as h,X as p,Y as i,Z as r,_ as l,aa as _,ba as c,ca as N,da as Q,e as T,ea as s,fa as u,ga as q,ha as $,j as M,k,ka as C,la as x,p as A,qa as b,sa as D,ta as z,ya as j}from"./chunk-TCNJI6BX.js";var w=class a{text="";control;static \u0275fac=function(t){return new(t||a)};static \u0275cmp=m({type:a,selectors:[["app-ui-radio-button"]],inputs:{text:"text",control:"control"},decls:5,vars:7,consts:[[1,"radio"],["name","radio","type","radio",3,"id","value","formControl"],[1,"radio__label",3,"for"]],template:function(t,e){t&1&&(i(0,"span",0),l(1,"input",1),i(2,"label",2)(3,"app-ui-typography"),s(4),r()()()),t&2&&(o(),Q("id","radio-",e.text,""),p("value",e.text)("formControl",e.control),o(),Q("for","radio-",e.text,""),o(2),u(e.text))},dependencies:[B,V,G,Z,d],styles:['.radio[_ngcontent-%COMP%]{align-items:center;display:flex;margin:10px}.radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{cursor:pointer}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{opacity:0;position:absolute}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + .radio__label[_ngcontent-%COMP%]{display:flex}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + .radio__label[_ngcontent-%COMP%]:before{background:#fff;border:2px solid #DBE2EA;border-radius:100%;content:"";display:inline-block;height:1.4em;margin-right:10px;text-align:center;transition:all .25s ease;width:1.4em}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio__label[_ngcontent-%COMP%]{color:#fff}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio__label[_ngcontent-%COMP%]:before{background-color:#e23d69;border-color:#e23d69;box-shadow:inset 0 0 0 4px #fff}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:focus + .radio__label[_ngcontent-%COMP%]{color:#fff}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:focus + .radio__label[_ngcontent-%COMP%]:before{border-color:#e23d69;outline:none}']})};function re(a,n){if(a&1&&(y(0),l(1,"app-ui-radio-button",2),_()),a&2){let t=n.$implicit,e=N();o(),p("text",t)("control",e.control)}}var I=class a{options=[];control;value=null;static \u0275fac=function(t){return new(t||a)};static \u0275cmp=m({type:a,selectors:[["app-ui-radio-group"]],inputs:{options:"options",control:"control"},decls:2,vars:1,consts:[[1,"radio-group"],[4,"ngFor","ngForOf"],[3,"text","control"]],template:function(t,e){t&1&&(i(0,"div",0),h(1,re,2,2,"ng-container",1),r()),t&2&&(o(),p("ngForOf",e.options))},dependencies:[b,w],encapsulation:2})};function pe(a,n){if(a&1&&(y(0),l(1,"svg-icon",15),_()),a&2){let t=n.$implicit;o(),p("src",t)}}var O=class a{item={question:"",type:!1,difficulty:"",category:"",correct_answer:"",incorrect_answers:[]};options=new Array(4);id=0;next=new v;prev=new v;getSelectedAnswer=new v;images=["avatars/Profile-1.svg","avatars/Profile-2.svg","avatars/Profile.svg"];formControl=new L;size=f;get selectedAnswer(){return this.getSelectedAnswer.emit(this.formControl.value),this.formControl.value}handlePrev(){this.prev.emit(),this.formControl.reset()}handleNext(){this.next.emit(),this.formControl.reset()}getFormattedText(){let n=this.item.question.length<=20,t=this.item.question.indexOf(" ",this.item.question.indexOf(" ")+2),e=this.item.question.lastIndexOf(n?"?":" ");return{start:this.item.question.slice(0,t),middle:this.item.question.slice(t,e),end:this.item.question.slice(e)}}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=m({type:a,selectors:[["app-ui-question-item"]],inputs:{item:"item",options:"options",id:"id"},outputs:{next:"next",prev:"prev",getSelectedAnswer:"getSelectedAnswer"},decls:23,vars:11,consts:[[1,"bg-success","px-7","py-10","rounded-3xl","flex","flex-col","items-center","justify-between","lg:min-h-[550px]"],[1,"w-full","flex","items-start","justify-between"],[1,"flex","items-center"],["type","H5","highlightText","framed","highlightColor","bg-warning"],["type","P1",1,"text-bright","ml-2"],[1,"flex"],[4,"ngFor","ngForOf"],[1,"w-full","flex","text-bright","items-center","justify-start","flex-wrap","*:mr-2","py-6"],["type","H4",1,"mr-2"],["type","H4","highlightText","framed","highlightColor","bg-error"],["type","H4"],[3,"control","options"],[1,"flex","items-center","justify-between","w-full","pt-10"],["type","ghost","iconState","prev",3,"click","disabled"],["type","accent","iconState","next",3,"click","disabled"],["svgClass","lg:w-20 lg:h-20 max-lg:w-16 max-lg:h-16 object-cover",3,"src"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"span",2)(3,"app-ui-typography",3),s(4),r(),i(5,"app-ui-typography",4),s(6),r()(),i(7,"span",5),h(8,pe,2,1,"ng-container",6),r()(),i(9,"span",7)(10,"app-ui-typography",8),s(11),r(),i(12,"app-ui-typography",9),s(13),r(),i(14,"app-ui-typography",10),s(15),r()(),i(16,"form"),l(17,"app-ui-radio-group",11),r(),i(18,"div",12)(19,"app-ui-button",13),c("click",function(){return e.handlePrev()}),s(20,"Prev question"),r(),i(21,"app-ui-button",14),c("click",function(){return e.handleNext()}),s(22),r()()()),t&2&&(o(4),u(e.id),o(2),q("/",e.size,""),o(2),p("ngForOf",e.images),o(3),u(e.getFormattedText().start),o(2),u(e.getFormattedText().middle),o(2),u(e.getFormattedText().end),o(2),p("control",e.formControl)("options",e.options),o(2),p("disabled",e.id==1),o(2),p("disabled",e.selectedAnswer==null),o(),q(" ",e.id==10?"Finish":"Next question"," "))},dependencies:[b,R,U,H,S,d,I],encapsulation:2})};var te=class a{constructor(n,t){this.route=n;this.storeService=t}quiz="";questions$;isLoading$;currentIndex$=new T(0);currentQuestion$;answers=new Array(f);nextQuestion(){let n=this.currentIndex$.value;n<f-1&&this.currentIndex$.next(n+1)}prevQuestion(){let n=this.currentIndex$.value;n>0&&this.currentIndex$.next(n-1)}getSelectedAnswer(n){this.answers[this.currentIndex$.value]=n}get options(){return this.currentQuestion$.pipe(A(1),M(n=>[...n.incorrect_answers,n.correct_answer].sort().reverse()))}get id(){return this.currentIndex$.value+1}ngOnInit(){this.quiz=this.route.snapshot.params.id,this.questions$=this.storeService.getQuestions(),this.isLoading$=this.storeService.getLoadingQuestions(),this.storeService.loadQuestions(Number.parseInt(this.quiz)),this.currentQuestion$=k([this.questions$,this.currentIndex$]).pipe(M(([n,t])=>n?.[t]||{question:"",type:!1,difficulty:"",category:"",correct_answer:"",incorrect_answers:[]}))}static \u0275fac=function(t){return new(t||a)(P(j),P(W))};static \u0275cmp=m({type:a,selectors:[["app-quiz"]],inputs:{quiz:"quiz"},standalone:!0,features:[$],decls:21,vars:10,consts:[[1,"absolute","inset-x-0","top","flex","flex-col","items-center","justify-between","min-h-fit","w-full","bg-primary","pb-8"],[1,"first:text-bright","flex","items-center","*:p-1.5","pb-3","flex-wrap","justify-center","text-center","w-3/4"],["type","H2"],["type","H3"],["type","H2","highlightText","ellipse"],["type","P1",1,"text-bright","lg:w-3/12","max-md:w-9/12","pb-5","text-center","flex","justify-center"],["link","/quizzes-catalog",1,"mb-4","lg:hidden"],["size","md","type","accent","iconState","prev"],[1,"lg:w-1/2","md:w-2/3","max-md:w-10/12",3,"next","prev","getSelectedAnswer","id","item","options"],["link","/quizzes-catalog",1,"lg:absolute","max-lg:hidden","left-3"],[3,"show"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"app-ui-typography",2),s(3,"Emoji Bands "),r(),i(4,"app-ui-typography",3),s(5,"Quiz"),r(),i(6,"app-ui-typography",4),s(7,"."),r()(),i(8,"app-ui-typography",5),s(9,"Can you decipher these emoji clues to answer these music-related questions?"),r(),i(10,"app-ui-link",6)(11,"app-ui-button",7),s(12,"Go to catalog"),r()(),i(13,"app-ui-question-item",8),C(14,"async"),C(15,"async"),c("next",function(){return e.nextQuestion()})("prev",function(){return e.prevQuestion()})("getSelectedAnswer",function(ne){return e.getSelectedAnswer(ne)}),r(),i(16,"app-ui-link",9)(17,"app-ui-button",7),s(18,"Go to catalog"),r()()(),l(19,"app-ui-spinner",10),C(20,"async")),t&2&&(o(13),p("id",e.id)("item",x(14,4,e.currentQuestion$))("options",x(15,6,e.options)),o(6),p("show",!!x(20,8,e.isLoading$)))},dependencies:[K,S,d,J,X,O,z,D],encapsulation:2})};export{te as QuestionComponent};
