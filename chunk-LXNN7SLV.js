import{b as _}from"./chunk-NA6WQYLY.js";import{a as ce,b as ue}from"./chunk-YJOTDBI6.js";import"./chunk-DYDY32UP.js";import{$ as o,Ba as ee,C as V,Da as te,Fa as ie,Ga as ne,Ha as oe,I as d,Ia as re,Ja as ae,Ka as se,L as U,La as pe,M as Z,Ma as le,Na as me,Oa as u,Pa as C,Qa as de,R as y,V as a,W as S,Y as h,Z as p,_ as n,a as R,aa as m,b as L,ba as T,ca as E,da as K,e as g,ea as f,fa as M,ga as j,h as W,ha as s,ia as l,j as A,ja as O,k as G,ka as Y,na as v,oa as x,p as H,ta as k,ua as P,va as J,wa as X}from"./chunk-R3PQQKNH.js";var Q=class r{item={page:"",text:"",title:"",link:""};getData(e){let t=e.trim();switch(t){case"Go to catalog":case"Quizzes catalog":this.item.page="quizzes catalog",this.item.link="quizzes-catalog";break;case"":this.item.page="main page",this.item.link="main";break;default:this.item.page=t.toLowerCase(),this.item.link=t.toLowerCase();break}return t.toLowerCase().includes("finish")?this.item={link:"statistics",page:"statistics",title:"Finish quiz",text:"To get your quiz result, please, confirm this action and go to the page with the conclusion."}:(this.item.title="Leave quiz",this.item.text="Are you sure you want to exit and cancel the quiz? Your answers will not be saved."),this.item}static \u0275fac=function(t){return new(t||r)};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};var $=class r{text="";control;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-ui-radio-button"]],inputs:{text:"text",control:"control"},decls:5,vars:7,consts:[[1,"radio"],["name","radio","type","radio",3,"id","value","formControl"],[1,"radio__label",3,"for"]],template:function(t,i){t&1&&(n(0,"span",0),m(1,"input",1),n(2,"label",2)(3,"app-ui-typography"),s(4),o()()()),t&2&&(a(),j("id","radio-",i.text,""),p("value",i.text)("formControl",i.control),a(),j("for","radio-",i.text,""),a(2),l(i.text))},dependencies:[ne,pe,oe,le,u],styles:['.radio[_ngcontent-%COMP%]{align-items:center;display:flex;margin:5px}.radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{cursor:pointer}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{opacity:0;position:absolute}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + .radio__label[_ngcontent-%COMP%]{display:flex}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + .radio__label[_ngcontent-%COMP%]:before{background:#fff;border:2px solid #DBE2EA;border-radius:100%;content:"";display:inline-block;height:1.4em;margin-right:10px;text-align:center;transition:all .25s ease;width:1.4em}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio__label[_ngcontent-%COMP%]{color:#fff}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio__label[_ngcontent-%COMP%]:before{background-color:#e23d69;border-color:#e23d69;box-shadow:inset 0 0 0 4px #fff}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:focus + .radio__label[_ngcontent-%COMP%]{color:#fff}.radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:focus + .radio__label[_ngcontent-%COMP%]:before{border-color:#e23d69;outline:none}']})};function ye(r,e){if(r&1&&(T(0),m(1,"app-ui-radio-button",2),E()),r&2){let t=e.$implicit,i=M();a(),p("text",t)("control",i.control)}}var D=class r{options=[];control;value=null;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-ui-radio-group"]],inputs:{options:"options",control:"control"},decls:2,vars:1,consts:[[1,"radio-group","flex","flex-col","max-md:items-start","lg:items-start"],[4,"ngFor","ngForOf"],[3,"text","control"]],template:function(t,i){t&1&&(n(0,"div",0),h(1,ye,2,2,"ng-container",1),o()),t&2&&(a(),p("ngForOf",i.options))},dependencies:[k,$],encapsulation:2})};function _e(r,e){if(r&1&&(T(0),m(1,"svg-icon",19),E()),r&2){let t=e.$implicit;a(),p("src",t)}}var z=class r{item={question:"",type:!1,difficulty:"",category:"",correct_answer:"",incorrect_answers:[]};options=new Array(4);id=0;next=new y;prev=new y;getSelectedAnswer=new y;images=["avatars/Profile-1.svg","avatars/Profile-2.svg","avatars/Profile.svg"];formControl=new ae;size=_;get selectedAnswer(){return this.getSelectedAnswer.emit(this.formControl.value),this.formControl.value}get buttonTextLg(){return{prev:"Prev question",next:this.id===this.size?"Finish":"Next question"}}get buttonTextSm(){return{prev:"Prev",next:this.id===this.size?"Finish":"Next"}}handlePrev(){this.prev.emit(),this.formControl.reset()}handleNext(){this.next.emit(),this.formControl.reset()}getFormattedText(){let e=this.item.question,t=Math.floor(e.length/3),i=e.indexOf(" ",t),c=i+1,w=e.lastIndexOf(" ",e.length-t);return{start:e.slice(0,i),middle:e.slice(c,w),end:e.slice(w)}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-ui-question-item"]],inputs:{item:"item",options:"options",id:"id"},outputs:{next:"next",prev:"prev",getSelectedAnswer:"getSelectedAnswer"},decls:31,vars:13,consts:[[1,"bg-success","px-7","py-10","rounded-3xl","flex","flex-col","items-center","justify-between","lg:min-h-[550px]"],[1,"w-full","flex","items-start","justify-between"],[1,"flex","items-center"],["type","H5","highlightText","framed","highlightColor","bg-warning"],["type","P1",1,"text-bright","ml-2"],[1,"flex"],[4,"ngFor","ngForOf"],["type","H6",1,"w-full","flex","justify-start","text-bright/90","underline","underline-offset-4","pt-3"],[1,"w-full","flex","text-bright","items-center","justify-start","flex-wrap","*:mr-2","py-6"],["type","H4",1,"mr-2"],["type","H4","highlightText","framed","highlightColor","bg-error"],["type","H4"],[1,"max-md:w-full","lg:min-w-2/5"],[3,"control","options"],[1,"flex","items-center","justify-between","w-full","pt-10"],["type","ghost","iconState","prev",1,"*:bg-accent/15",3,"click"],[1,"max-sm:hidden","sm:block"],[1,"max-sm:block","sm:hidden"],["type","accent","iconState","next",3,"click"],["svgClass","lg:w-20 lg:h-20 max-lg:w-16 max-lg:h-16 object-cover",3,"src"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"span",2)(3,"app-ui-typography",3),s(4),o(),n(5,"app-ui-typography",4),s(6),o()(),n(7,"span",5),h(8,_e,2,1,"ng-container",6),o()(),n(9,"app-ui-typography",7),s(10),o(),n(11,"span",8)(12,"app-ui-typography",9),s(13),o(),n(14,"app-ui-typography",10),s(15),o(),n(16,"app-ui-typography",11),s(17),o()(),n(18,"form",12),m(19,"app-ui-radio-group",13),o(),n(20,"div",14)(21,"app-ui-button",15),f("click",function(){return i.handlePrev()}),n(22,"span",16),s(23),o(),n(24,"span",17),s(25),o()(),n(26,"app-ui-button",18),f("click",function(){return i.handleNext()}),n(27,"span",16),s(28),o(),n(29,"span",17),s(30),o()()()()),t&2&&(a(4),l(i.id),a(2),O("/",i.size,""),a(2),p("ngForOf",i.images),a(2),l(i.item.category),a(3),l(i.getFormattedText().start),a(2),l(i.getFormattedText().middle),a(2),l(i.getFormattedText().end),a(2),p("control",i.formControl)("options",i.options),a(4),l(i.buttonTextLg.prev),a(2),l(i.buttonTextSm.prev),a(3),l(i.buttonTextLg.next),a(2),l(i.buttonTextSm.next))},dependencies:[k,ie,se,re,C,u,D],encapsulation:2})};var q=class r{confirm=new y;data={page:"",link:"",text:"",title:""};onConfirm(){this.confirm.emit(!0)}onCancel(){this.confirm.emit(!1)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-ui-modal-window"]],inputs:{data:"data"},outputs:{confirm:"confirm"},decls:16,vars:3,consts:[["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"relative","z-10"],["aria-hidden","true",1,"fixed","inset-0","bg-muted/75","transition-opacity"],[1,"fixed","inset-x-0","top-1/4","z-10","w-screen","overflow-y-auto"],[1,"flex","min-h-full","items-end","justify-center","p-4","text-center","sm:items-center","sm:p-0"],[1,"relative","transform","overflow-hidden","rounded-xl","border-accent","border-4","bg-bright","text-left","shadow-xl","transition-all","lg:max-w-lg","max-md:max-w-sm","p-10","flex","flex-col","items-center"],[1,"flex","flex-col","items-center","text-center","w-full","*:py-1.5"],["type","H6"],["type","P1"],[1,"flex","max-md:flex-col","items-center","*:p-0.5"],["type","accent",3,"click"],["type","ghost",1,"*:text-accent",3,"click"]],template:function(t,i){t&1&&(n(0,"div",0),m(1,"div",1),n(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"app-ui-typography",6),s(7),o(),n(8,"app-ui-typography",7),s(9),o(),m(10,"div"),o(),n(11,"div",8)(12,"app-ui-button",9),f("click",function(){return i.onCancel()}),s(13,"Back to quiz"),o(),n(14,"app-ui-button",10),f("click",function(){return i.onConfirm()}),s(15),o()()()()()()),t&2&&(a(7),l(i.data.title),a(2),l(i.data.text),a(6),O("Go to ",i.data.page,""))},dependencies:[C,u],encapsulation:2})};function Me(r,e){r&1&&(n(0,"div",1)(1,"app-ui-typography"),s(2,"Notification about prev/next buttons "),o()())}var F=class r{show=!1;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-ui-notification"]],inputs:{show:"show"},decls:1,vars:1,consts:[["class","flex items-center fixed right-4 p-3 pr-5 bg-error text-bright border-4 border-error rounded z-50",4,"ngIf"],[1,"flex","items-center","fixed","right-4","p-3","pr-5","bg-error","text-bright","border-4","border-error","rounded","z-50"]],template:function(t,i){t&1&&h(0,Me,3,0,"div",0),t&2&&p("ngIf",i.show)},dependencies:[P,u],encapsulation:2})};function Te(r,e){if(r&1){let t=K();n(0,"app-ui-modal-window",12),v(1,"async"),f("confirm",function(c){U(t);let w=M();return Z(w.handleModalResponse(c))}),o()}if(r&2){let t=M();p("data",x(1,1,t.modalWindowData$))}}var ge=class r{constructor(e,t,i,c){this.activeRoute=e;this.router=t;this.storeService=i;this.modalService=c}quiz="";questions$;isLoading$;isNotification$=new g(!1);currentIndex$=new g(0);currentQuestion$;answers=new Array(_);modalWindowState$=new g(!1);modalWindowChoice$=new g(!1);modalWindowData$=new g({page:"",title:"",text:"",link:""});canDeactivate(){this.currentIndex$.value==_&&(this.modalWindowData$=new g(this.modalService.getData("Finish")));let e=event?.target;return this.modalWindowData$=new g(this.modalService.getData(e.textContent)),this.modalWindowState$.next(!0),this.modalWindowState$.value&&this.modalWindowChoice$.value?W(!0):W(!1)}handleModalResponse(e){e?(this.modalWindowChoice$.next(!0),this.router.navigateByUrl(this.modalWindowData$.value.link)):this.modalWindowChoice$.next(!1),this.modalWindowState$.next(!1)}get options(){return this.currentQuestion$.pipe(H(1),A(e=>[...e.incorrect_answers,e.correct_answer].sort().reverse()))}get id(){return this.currentIndex$.value+1}ngOnInit(){this.quiz=this.activeRoute.snapshot.params.id,this.questions$=this.storeService.getQuestions(),this.isLoading$=this.storeService.getLoadingQuestions(),this.storeService.loadQuestions(Number.parseInt(this.quiz)),this.currentQuestion$=G([this.questions$,this.currentIndex$]).pipe(A(([e,t])=>{let i=e?.[t]||{question:"",type:!1,difficulty:"",category:"",correct_answer:"",incorrect_answers:[]};return this.decodeQuestion(i)}))}decodeText(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||e}decodeQuestion(e){return L(R({},e),{question:this.decodeText(e.question),category:this.decodeText(e.category),correct_answer:this.decodeText(e.correct_answer),incorrect_answers:e.incorrect_answers.map(this.decodeText)})}nextQuestion(){let e=this.currentIndex$.value;e<_-1?this.currentIndex$.next(e+1):this.router.navigateByUrl(this.modalWindowData$.value.link)}prevQuestion(){let e=this.currentIndex$.value;e>0?this.currentIndex$.next(e-1):(this.isNotification$.next(!0),setTimeout(()=>{this.isNotification$.next(!1)},2e3))}setSelectedAnswer(e){this.answers[this.currentIndex$.value]=e}static \u0275fac=function(t){return new(t||r)(S(ee),S(te),S(ce),S(Q))};static \u0275cmp=d({type:r,selectors:[["app-quiz"]],inputs:{quiz:"quiz"},standalone:!0,features:[Y],decls:25,vars:16,consts:[[1,"absolute","inset-x-0","top","flex","flex-col","items-center","justify-between","min-h-fit","w-full","bg-primary","pb-8"],[1,"first:text-bright","flex","items-center","*:p-1.5","pb-3","flex-wrap","justify-center","text-center","w-3/4"],["type","H2"],["type","H3"],["type","H2","highlightText","ellipse"],["type","P1",1,"text-bright","lg:w-3/12","max-md:w-9/12","pb-5","text-center","flex","justify-center"],["link","/quizzes-catalog",1,"mb-4","lg:hidden"],["size","md","type","accent","iconState","prev"],[1,"lg:w-1/2","md:w-2/3","max-md:w-10/12",3,"next","prev","getSelectedAnswer","id","item","options"],["link","/quizzes-catalog",1,"lg:absolute","max-lg:hidden","left-3"],[3,"show"],[3,"data","confirm",4,"ngIf"],[3,"confirm","data"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"app-ui-typography",2),s(3,"Emoji Bands "),o(),n(4,"app-ui-typography",3),s(5,"Quiz"),o(),n(6,"app-ui-typography",4),s(7,"."),o()(),n(8,"app-ui-typography",5),s(9,"Can you decipher these emoji clues to answer these music-related questions?"),o(),n(10,"app-ui-link",6)(11,"app-ui-button",7),s(12,"Go to catalog"),o()(),n(13,"app-ui-question-item",8),v(14,"async"),v(15,"async"),f("next",function(){return i.nextQuestion()})("prev",function(){return i.prevQuestion()})("getSelectedAnswer",function(w){return i.setSelectedAnswer(w)}),o(),n(16,"app-ui-link",9)(17,"app-ui-button",7),s(18,"Go to catalog"),o()()(),m(19,"app-ui-spinner",10),v(20,"async"),h(21,Te,2,3,"app-ui-modal-window",11),v(22,"async"),m(23,"app-ui-notification",10),v(24,"async")),t&2&&(a(13),p("id",i.id)("item",x(14,6,i.currentQuestion$))("options",x(15,8,i.options)),a(6),p("show",!!x(20,10,i.isLoading$)),a(2),p("ngIf",x(22,12,i.modalWindowState$)),a(2),p("show",x(24,14,i.isNotification$)))},dependencies:[me,C,u,de,ue,z,q,F,X,P,J],encapsulation:2})};export{ge as QuestionComponent};
